---
layout: article
title: Altium Designer. Авторут дорожек разной толщины
modify_date: 2011-12-28
tags: altium designer old
image_path: /assets/images/2011-12-28-altium-designer-autoroute
---

Статья из моего старого блога: [https://kirik444.wordpress.com/2011/12/28/altium-designer-autoroute-various-thikness/](https://kirik444.wordpress.com/2011/12/28/altium-designer-autoroute-various-thikness/)

И снова здравствуйте. Сегодня я расскажу о том, как заставить Altium авторутить дорожки разной толщины.

![]({{page.image_path}}/00-pcb.png)


На рисунке сверху стрелками указаны дорожки разной толщины, прорисованные автоматически.

#### Когда бывает это необходимо?

Знающий читатель, посмотрев на первый рисунок, может догадаться, что U3 - L298HN. D1-D8 - диоды по даташиту, P10-1 и P10-2 - клеммники для подключения обмоток шагового двигателя. Шаговые двигатели, используемые в проекте с этой платой, кушают порядка 3.5 ампер. Помимо силовых дорожек еще есть цифровые, по которым протекают токи на порядок меньшие. Логично предположить, что все дорожки сделать тонкими по 0.3-0.4 мм нельзя, так как ток в 3.5 ампера такие дорожки не потянут, а сделать все дорожки по 1.5 миллиметра нельзя, потому что авторут может несправиться с разводкой.

#### Как настроить Altium для этого?

В файле PCB выбираем сверху **Design → Classes** . Перед нами открывается окно "Object Class Explorer", в котором можно настроить классы дорожек, компонентов, слоёв и так далее. Поскольку мы никаких классов еще не создали, то единственный класс дорожек *Net Classes → &lt;All Nets>*. Это класс, который присутствует по-умолчанию в каждом проекте и содержит все дорожки, задействованные в нём.

![]({{page.image_path}}/01-all-classes.png)


Щелкаем правой кнопкой на **Net Classes**, в появившемся меню выбираем **AddClass**. В данном случае нам необходимо создать три класса:

1. DigitalNets -  класс, содержащий в себе все слаботочные, цифровые, дорожки.
2. PowerNets - в этом классе содержатся дорожки, ведущие к силовым компонентам.
5. EmptyNets - а это пустой класс. Его назначение будет объяснено позднее.

Каждый класс содержит в себе две группы: **Non-Members** и **Members**. Заполнять группу Members необходимо вдумчиво, поскольку в проекте с большим количеством соединений можно ошибиться и забыть внести необходимую дорожку в нужный класс или, наоборот, добавить одну и ту же дорожку в разные классы.

Теперь, после создания и заполнения классов, необходимо настроить правила автотрассировки с учетом различной толщины дорожек. Делается это следующим образом:  **Auto route → Setup → Edit Rules**. В этом окне можно настроить правила автотрассировки. На данный момент нас интересует только одно правило -- толщина. Поэтому в левой части окна выбираем **Disign Rules → Routing → Width**. Изначально там всего-лишь одно правило **Width**, настройки которого нам совершенно не подходят. Создаем 2 новых правила - **PowerNetsWidth** и  **DigitalNetsWidth**. Во вновь созданных правилах необходимо задать правильные параметры.

![]({{page.image_path}}/02-new-class.png)

В области **Constrains** указываем все толщины (минимальная, оптимальная, максимальная) в 1.2 мм. Теперь необходимо указать, к каким дорожкам это правило должно быть применимо. В области **Where The First Object Matches** выбираем **Net Class**, а в верхнем Combo Box'e - **PowerNets**. Аналогичную манипуляцию производим с **DigitalNetsWidth** только там указываем толщину в 0.5 мм и класс дорожек - **DigitalNets**.


Необходимо помнить, что правило **Width** главнее всех созданных, поэтому если его не изменить, то наши 2 правила просто проигнорируются. Поэтому в настройках этого правила указываем класс дорожек **EmptyNets**.


Вот теперь смело нажимаем **Apply**. А потом с чувством собственного достоинства жмём **Auto Route → All**. Теперь плата будет разведена с учетом наших правил.

Конец.
